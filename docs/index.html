<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A fluent API for accessing multi-assay high-throughput genomics data • FacileData</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="A fluent API for accessing multi-assay high-throughput genomics data">
<meta property="og:description" content='Defines the "FacileData" API over multi-assay, high-throughput
  genomics data. The FacileData API is a fluent grammar that facilitates
  exploratory data analysis. This package also defines a "FacileDataSet" class,
  which is a reference implementation of the "FacileData" API that uses SQLite
  and HDF5 files to store arbitrarily large datasets and provide fast and
  efficient access to arbitrary subsets of these data without loading it all
  into memory.'>
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">FacileData</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.10.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/FacileData.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/FacileDataSet.html">FacileDataSet Overview</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="faciledata" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#faciledata" class="anchor"></a>FacileData</h1></div>
<!-- 
badges: start
checkout https://lazappi.github.io/clustree/ package for some badge-inspiration
-->

<p>The <code>FacileData</code> package was written to facilitate easier analysis of large, multi-assay high-throughput genomics datasets. To this end, the <code>FacileData</code> package provides two things:</p>
<ol style="list-style-type: decimal">
<li>A <em>FacileData Access API</em> that defines a fluent interface over multi-assay genomics datasets that fits into the <a href="https://www.tidyverse.org/">tidyverse</a>. This enables analysts to more naturally query and retrieve data for general exploratory data analysis; and</li>
<li>A reference implementation of a datastore that implements the <em>FacileData Access API</em> called a <em>FacileDataSet</em>. The <code>FacileDataSet</code> provides efficient storage and retrieval of arbitrarily large high-throughput genomics datasets. For example, a single <code>FacileDataSet</code> can be used to store <em>all</em> of the RNA-seq, microarray, RPPA, etc. data from the <a href="https://cancergenome.nih.gov/">The Cancer Genome Atlas</a>. This singular <code>FacileDataSet</code> allows analysts easy access to arbitrary subsets of these data without having to load all of it into memory.</li>
</ol>
<p><strong>A note on the experimental lifecycle</strong>: This package is tagged as “experimental” due to its limited use by a broader audience, and not as a sign of the commitment to its development or how long it has been in (internal) use. As we find the edge cases and pain points in the APIs through broader adoption, we expect to soon move to “maturing” (and eventually “stable”) <a href="https://www.tidyverse.org/lifecycle/">lifecycle</a>.</p>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p>The FacileData suite of packages is only available from github from now. You will want to install three <code>FacileData*</code> packages to appreciate the its utility:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"facileverse/FacileData"</span>)</a></code></pre></div>
</div>
<div id="example-usage" class="section level1">
<h1 class="hasAnchor">
<a href="#example-usage" class="anchor"></a>Example Usage</h1>
<p>As a teaser, we’ll show how to plot HER2 copy number vs expression across the TCGA bladder and breast indications (“BLCA” and “BRCA”) using a <code>FacileDataSet</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(FacileData)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(FacileTCGADataSet)</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">tcga &lt;-<span class="st"> </span><span class="kw">FacileTCGADataSet</span>()</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">features &lt;-<span class="st"> </span><span class="kw">filter_features</span>(tcga, name <span class="op">==</span><span class="st"> "ERBB2"</span>)</a>
<a class="sourceLine" id="cb2-7" data-line-number="7"></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">fdat &lt;-<span class="st"> </span>tcga <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="st">  </span><span class="kw">filter_samples</span>(indication <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"BLCA"</span>, <span class="st">"BRCA"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="st">  </span><span class="kw">with_assay_data</span>(features, <span class="dt">assay_name =</span> <span class="st">"rnaseq"</span>, <span class="dt">normalized =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="st">  </span><span class="kw">with_assay_data</span>(features, <span class="dt">assay_name =</span> <span class="st">"cnv_score"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="st">  </span><span class="kw"><a href="reference/with_sample_covariates.html">with_sample_covariates</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"indication"</span>, <span class="st">"sex"</span>))</a>
<a class="sourceLine" id="cb2-13" data-line-number="13"></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(fdat, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(cnv_score_ERBB2, ERBB2, <span class="dt">color =</span> sex)) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="op">~</span><span class="st"> </span>indication)</a></code></pre></div>
<p><img src="articles/images/her2_cnv_vs_expression.png"></p>
<p>Let’s compare how you might do the same using data stored in a <code>SummarizedExperiment</code> named <code>se.tcga</code> that stores RNA-seq (raw and normalized) and copy number data.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># load / get `se.all` from somewhere</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">fidx &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/which">which</a></span>(<span class="kw">mcols</span>(se.all)<span class="op">$</span>name <span class="op">==</span><span class="st"> "ERBB2"</span>)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">se &lt;-<span class="st"> </span>se.all[, se.all<span class="op">$</span>indication <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"BLCA"</span>, <span class="st">"BRCA"</span>)]</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">sdat &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">  <span class="dt">ERBB2 =</span> <span class="kw">assay</span>(se, <span class="st">"rnaseq_norm"</span>)[fidx,],</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">  <span class="dt">cnv_score_ERBB2 =</span> <span class="kw">assay</span>(se, <span class="st">"cnv_score"</span>)[fidx,],</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">  <span class="dt">sex =</span> se<span class="op">$</span>sex,</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">  <span class="dt">indication =</span> se<span class="op">$</span>indication)</a>
<a class="sourceLine" id="cb3-10" data-line-number="10"></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(fdat, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(cnv_score_ERBB2, ERBB2, <span class="dt">color=</span>sex)) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="op">~</span><span class="st"> </span>indication)</a></code></pre></div>
<p>Or peharps using <a href="http://bioconductor.org/packages/biobroom">biobroom</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Steve Lianoglou <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-0924-1754" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
<li>Vincent Rouilly <br><small class="roles"> Author </small>  </li>
<li>Peter Haverty <br><small class="roles"> Author </small>  </li>
<li>Denali Therapeutics <br><small class="roles"> Copyright holder, funder </small>  <br><small>(Coypright 2019)</small>
</li>
<li>Genentech <br><small class="roles"> Copyright holder, funder </small>  <br><small>(Coypright 2016 - 2018)</small>
</li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>


      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="http://www.repostatus.org/#active"><img src="http://www.repostatus.org/badges/latest/active.svg" alt="Project Status"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: Experimental"></a></li>
<li><a href="https://travis-ci.org/facileverse/FacileData"><img src="https://travis-ci.org/facileverse/FacileData.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://codecov.io/gh/facileverse/FacileData?branch=master"><img src="https://codecov.io/gh/facileverse/FacileData/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Steve Lianoglou, Vincent Rouilly, Peter Haverty, Denali Therapeutics, Genentech.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
